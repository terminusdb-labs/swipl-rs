<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Prolog contexts."><title>swipl::context - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9bb858ba049f1f21.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="swipl" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.1 (d5c2e9c34 2023-09-13)" data-channel="1.72.1" data-search-js="search-f6292fe389d70017.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ><script src="../../static.files/storage-59fd9b8ccb335783.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../swipl/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../swipl/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module context</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">swipl</a>::<wbr><a class="mod" href="#">context</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/swipl/context.rs.html#1-1672">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Prolog contexts.</p>
<p>As you interact with SWI-Prolog, the underlying prolog engine
moves into different states, where different things are
allowed. We keep track of this underlying state through Context
objects.</p>
<p>Currently, there’s four kind of states that we keep track of:</p>
<ul>
<li>ActivatedEngine - this is the state an engine will be in when we
just created it. If you’re directly working with engines, this
will be your initial state.</li>
<li>Unmanaged - this is the state an engine will be in when prolog
is calling into the rust library, for example, when a foreign
predicate implemented in rust is being called.</li>
<li>Framed - In any context, you can create a prolog frame. A prolog
frame allows you to rewind the state of all prolog terms to their
state at the time of frame creation.</li>
<li>OpenCall - While calling into prolog, this is the context you’ll
be in as you’re walking through the solutions. This is a special
context where a lot of the normal features are disabled.</li>
</ul>
<p>Contexts are either active or inactive. A context starts out as
active, but as soon as you do something that creates a new context
(create a frame, open a query), the context will become
inactive. Once the created context is dropped, the original
context will become active again.</p>
<p>With the exception of the OpenCall context, all contexts let you
create new term refs, which are handles to data on the prolog
stack. These term refs can only be created while the context is
active. However, they can be manipulated as long as the context
that created them exists. As soon as the context is dropped
though, the Term will become invalid and trying to do anything
with it will result in a compile error.</p>
<p>The OpenCall context is special in that no new terms are allowed
to be created, nor are you allowed to open another query. It is
however possible to create a new frame in this context, which
would once again put you in a state where these things are
possible. Of course, you’ll have to drop this frame before you’re
able to manipulate the OpenCall context again (such as retrieving
the next solution from the query).</p>
<p>Various operations may cause the underlying engine to go into an
exceptional state. This is signaled by these operations returning
an <code>Err(PrologError::Exception)</code>. This means that a special
exception term has been set. Most context operations are
impossible while in this state, and attempting to perform them
will result in a panic. Your options are either to return back
into prolog (if you’re implementing a foreign predicate), which
will then raise this exception in prolog, or to clear the
exception.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ActivatedEngine.html" title="struct swipl::context::ActivatedEngine">ActivatedEngine</a></div><div class="desc docblock-short">Context type for an active engine. This wraps an <code>EngineActivation</code>.</div></li><li><div class="item-name"><a class="struct" href="struct.Context.html" title="struct swipl::context::Context">Context</a></div><div class="desc docblock-short">A context that the underlying prolog engine is in.</div></li><li><div class="item-name"><a class="struct" href="struct.ExceptionTerm.html" title="struct swipl::context::ExceptionTerm">ExceptionTerm</a></div><div class="desc docblock-short">A term wrapper for the special exception term.</div></li><li><div class="item-name"><a class="struct" href="struct.Frame.html" title="struct swipl::context::Frame">Frame</a></div><div class="desc docblock-short">Context type for a prolog frame.</div></li><li><div class="item-name"><a class="struct" href="struct.GenericQueryableContextType.html" title="struct swipl::context::GenericQueryableContextType">GenericQueryableContextType</a></div></li><li><div class="item-name"><a class="struct" href="struct.TermListIterator.html" title="struct swipl::context::TermListIterator">TermListIterator</a></div><div class="desc docblock-short">An iterator over a term list.</div></li><li><div class="item-name"><a class="struct" href="struct.Unmanaged.html" title="struct swipl::context::Unmanaged">Unmanaged</a></div><div class="desc docblock-short">Context type for an unmanaged engine.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.ContextType.html" title="trait swipl::context::ContextType">ContextType</a></div><div class="desc docblock-short">A type of context.</div></li><li><div class="item-name"><a class="trait" href="trait.FrameableContextType.html" title="trait swipl::context::FrameableContextType">FrameableContextType</a></div><div class="desc docblock-short">A trait marker for context types for which it is safe to open frames.</div></li><li><div class="item-name"><a class="trait" href="trait.IntoPrologException.html" title="trait swipl::context::IntoPrologException">IntoPrologException</a></div><div class="desc docblock-short">Trait for turning errors into prolog exceptions</div></li><li><div class="item-name"><a class="trait" href="trait.QueryableContextType.html" title="trait swipl::context::QueryableContextType">QueryableContextType</a></div><div class="desc docblock-short">A trait marker for context types for which it is safe to open queries and create new term refs.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.prolog_catch_unwind.html" title="fn swipl::context::prolog_catch_unwind">prolog_catch_unwind</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">Call the given function, converting panics into prolog exceptions.</div></li><li><div class="item-name"><a class="fn" href="fn.unmanaged_engine_context.html" title="fn swipl::context::unmanaged_engine_context">unmanaged_engine_context</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">Create an unmanaged context for situations where the thread has an engine that rust doesn’t know about.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.GenericQueryableContext.html" title="type swipl::context::GenericQueryableContext">GenericQueryableContext</a></div></li></ul></section></div></main></body></html>
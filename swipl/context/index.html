<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Prolog contexts."><meta name="keywords" content="rust, rustlang, rust-lang, context"><title>swipl::context - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../swipl/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module context</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="context" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">swipl</a>::<wbr><a class="mod" href="#">context</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/swipl/context.rs.html#1-1544" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Prolog contexts.</p>
<p>As you interact with SWI-Prolog, the underlying prolog engine
moves into different states, where different things are
allowed. We keep track of this underlying state through Context
objects.</p>
<p>Currently, there’s four kind of states that we keep track of:</p>
<ul>
<li>ActivatedEngine - this is the state an engine will be in when we
just created it. If you’re directly working with engines, this
will be your initial state.</li>
<li>Unmanaged - this is the state an engine will be in when prolog
is calling into the rust library, for example, when a foreign
predicate implemented in rust is being called.</li>
<li>Framed - In any context, you can create a prolog frame. A prolog
frame allows you to rewind the state of all prolog terms to their
state at the time of frame creation.</li>
<li>OpenCall - While calling into prolog, this is the context you’ll
be in as you’re walking through the solutions. This is a special
context where a lot of the normal features are disabled.</li>
</ul>
<p>Contexts are either active or inactive. A context starts out as
active, but as soon as you do something that creates a new context
(create a frame, open a query), the context will become
inactive. Once the created context is dropped, the original
context will become active again.</p>
<p>With the exception of the OpenCall context, all contexts let you
create new term refs, which are handles to data on the prolog
stack. These term refs can only be created while the context is
active. However, they can be manipulated as long as the context
that created them exists. As soon as the context is dropped
though, the Term will become invalid and trying to do anything
with it will result in a compile error.</p>
<p>The OpenCall context is special in that no new terms are allowed
to be created, nor are you allowed to open another query. It is
however possible to create a new frame in this context, which
would once again put you in a state where these things are
possible. Of course, you’ll have to drop this frame before you’re
able to manipulate the OpenCall context again (such as retrieving
the next solution from the query).</p>
<p>Various operations may cause the underlying engine to go into an
exceptional state. This is signaled by these operations returning
an <code>Err(PrologError::Exception)</code>. This means that a special
exception term has been set. Most context operations are
impossible while in this state, and attempting to perform them
will result in a panic. Your options are either to return back
into prolog (if you’re implementing a foreign predicate), which
will then raise this exception in prolog, or to clear the
exception.</p>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ActivatedEngine.html" title="swipl::context::ActivatedEngine struct">ActivatedEngine</a></div><div class="item-right docblock-short"><p>Context type for an active engine. This wraps an <code>EngineActivation</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Context.html" title="swipl::context::Context struct">Context</a></div><div class="item-right docblock-short"><p>A context that the underlying prolog engine is in.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExceptionTerm.html" title="swipl::context::ExceptionTerm struct">ExceptionTerm</a></div><div class="item-right docblock-short"><p>A term wrapper for the special exception term.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Frame.html" title="swipl::context::Frame struct">Frame</a></div><div class="item-right docblock-short"><p>Context type for a prolog frame.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TermListIterator.html" title="swipl::context::TermListIterator struct">TermListIterator</a></div><div class="item-right docblock-short"><p>An iterator over a term list.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Unmanaged.html" title="swipl::context::Unmanaged struct">Unmanaged</a></div><div class="item-right docblock-short"><p>Context type for an unmanaged engine.</p>
</div></div></div><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ContextType.html" title="swipl::context::ContextType trait">ContextType</a></div><div class="item-right docblock-short"><p>A type of context.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.FrameableContextType.html" title="swipl::context::FrameableContextType trait">FrameableContextType</a></div><div class="item-right docblock-short"><p>A trait marker for context types for which it is safe to open frames.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.IntoPrologException.html" title="swipl::context::IntoPrologException trait">IntoPrologException</a></div><div class="item-right docblock-short"><p>Trait for turning errors into prolog exceptions</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.QueryableContextType.html" title="swipl::context::QueryableContextType trait">QueryableContextType</a></div><div class="item-right docblock-short"><p>A trait marker for context types for hich it is safe to open queries and create new term refs.</p>
</div></div></div><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.prolog_catch_unwind.html" title="swipl::context::prolog_catch_unwind fn">prolog_catch_unwind</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"><p>Call the given function, converting panics into prolog exceptions.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.unmanaged_engine_context.html" title="swipl::context::unmanaged_engine_context fn">unmanaged_engine_context</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short"><p>Create an unmanaged context for situations where the thread has an engine that rust doesn’t know about.</p>
</div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="swipl" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>